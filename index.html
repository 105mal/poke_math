<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <title>ポケモンたしざんゲーム</title>
    <!-- レスポンシブデザインのためのメタタグ -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/styles.css">
</head>
<body>
    <!-- ストーリー画面 -->
    <div id="story" class="hidden">
        <h1 id="game-title"></h1>
        <div id="random-pokemons" class="random-pokemons">
            <!-- 3 Pokémonがここに表示されます -->
        </div>
        <!-- 【ずかん】ボタンを追加 -->
        <button class="button" onclick="openPictureBook()">ずかん</button>
        <button class="button" onclick="beginAdventure()">はじめる</button>
    </div>

    <!-- キャラクター選択画面 -->
    <div id="character-select" class="hidden">
        <h2>すきなポケモンをえらぼう！</h2>
        <div class="pokemon-list" id="pokemon-list">
            <!-- ここにポケモンが表示されます -->
        </div>
    </div>

    <!-- ポップアップ画面 -->
    <div id="popup" class="hidden">
        <div id="popup-content">
            <h2 id="popup-message"></h2>
            <img id="popup-pokemon-image" src="" alt="選択したポケモン" class="pokemon-image">
            <div id="popup-pokemon-name" class="pokemon-name"></div>
            <div id="popup-pokemon-types" class="pokemon-types"></div>
            <button class="button" onclick="confirmSelection()">はい</button>
            <button class="button" onclick="cancelSelection()">いいえ</button>
        </div>
    </div>

    <!-- チュートリアル画面 -->
    <div id="tutorial" class="hidden">
        <p>せいかいで とくべつなポケモンが もらえる！</p>
        <img id="master-ball" src="https://img.pokemondb.net/sprites/items/master-ball.png" alt="マスターボール">
        <button class="button" onclick="startGameAfterTutorial()">はじめる</button>
    </div>

    <!-- ゲーム画面 -->
    <div id="game" class="hidden">
        <div id="special-reward-message" class="hidden">せいかいで とくべつなポケモンが もらえる！</div>
        <div class="number-container">
            <div id="number1" class="number"></div>
            <div id="plus">+</div>
            <div id="number2" class="number"></div>
            <div id="equals">=</div>
            <div id="result" class="number">?</div>
        </div>
        <!-- 答えのボタン -->
        <div id="answers" class="hidden">
            <button class="button answer-button" onclick="checkAnswer(0)"></button>
            <button class="button answer-button" onclick="checkAnswer(1)"></button>
            <button class="button answer-button" onclick="checkAnswer(2)"></button>
            <button class="button answer-button" onclick="checkAnswer(3)"></button>
        </div>
        <!-- 新しい問題ボタン -->
        <button id="new-problem-button" class="button hidden" onclick="generateNewProblem()">あたらしいもんだいへ</button>
        <!-- 【やめる】ボタンを追加 -->
        <button class="button quit-button" onclick="quitGame()">やめる</button>
        <!-- ボトムバーの追加 -->
        <div id="game-bottom-bar">
            <!-- 選択したポケモンの後ろ姿 -->
            <img id="selected-pokemon-back-image-game" src="" alt="選択したポケモン" class="selected-pokemon-back-image hidden">
            <!-- 進捗バー -->
            <div id="progress-bar-container">
                <div id="progress-bar"></div>
            </div>
            <!-- マスターボール -->
            <img src="https://img.pokemondb.net/sprites/items/master-ball.png" alt="マスターボール" class="master-ball-image">
        </div>
    </div>

    <!-- 結果画面 -->
    <div id="result-screen" class="hidden">
        <div id="result-message" class="result-message hidden"></div>
        <!-- ロード中のモンスターボール画像 -->
        <div id="loading-container" class="hidden">
            <img id="loading-ball" src="https://img.pokemondb.net/sprites/items/poke-ball.png" alt="ロード中" class="loading-ball">
            <div class="loading-text">Loading...</div>
        </div>
        <img id="result-pokemon" src="" alt="ポケモン" class="pokemon-image hidden">
        <div id="pokemon-name" class="pokemon-name"></div>
        <div id="pokemon-types" class="pokemon-types"></div>
        <button class="button" onclick="startGame()">あたらしいもんだいへ</button>
    </div>

    <!-- 特別な報酬ポップアップ -->
    <div id="special-reward-popup" class="hidden">
        <div id="special-reward-content">
            <h2 id="special-reward-title">とくべつなポケモンをてにいれた！</h2>
            <div id="special-pokemon-name" class="pokemon-name"></div>
            <img id="special-reward-pokemon-image" src="" alt="特別なポケモン" class="pokemon-image">
            <div id="special-pokemon-types" class="pokemon-types"></div>
            <button class="button" onclick="closeSpecialRewardPopup()">とじる</button>
            <!-- 【ずかんへ】ボタンを追加 -->
            <button class="button" onclick="openPictureBook()">ずかんへ</button>
        </div>
    </div>

    <!-- ローディングスピナー追加 -->
    <div id="loading-spinner" class="loading-spinner hidden">
        <div class="spinner"></div>
    </div>

    <!-- エラーメッセージ表示 -->
    <div id="error-message" class="error-message hidden" role="alert">
        <p>エラーが発生しました。再度お試しください。</p>
        <button class="button" onclick="retry()" aria-label="再試行">再試行</button>
    </div>

    <script src="js/script.js"></script>
</body>
</html>
